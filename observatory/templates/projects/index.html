{% extends "base.html" %}

{% block content %}

{% if projects %}
    <h2 style='float: left'>Projects</h2>
{% else %}
    <h2 style="float:left">No projects found.</h2>
{% endif %}
{% if user.is_authenticated %}
    <ul class='project-info'>
        <li>
            <a href="{% url dashboard.views.projects.add %}"
               class="button-small">
                Add a Project
            </a>
        </li>
    </ul>
{% endif %}
<div style="clear:both"></div>
{% endblock %}

{% block extracontent %}
<div id="projects-list">    
    {% for project in projects %}
        <div class="extra-content" id="project-{{ project.id }}">
            {% if project.rank %}
                <div class="project-rank"
                     style="{{ project.rank_emblem_css }}">
                    {{ project.rank }}
                </div>
            {% endif %}
            <h2 style="float:left; clear:both">
                <a href="{% url dashboard.views.projects.show project.id %}">
                    {{ project.title }}
                </a>
            </h2>
            {% include "projects/info.html" %}
            <div style="clear:both"></div>
            {{ project.description }}
            <div class="project-updated">
                {% if project.rank %}
                    <div style="float:left">
                        {{ project.repository.when_updated }}
                    </div>
                    <div style="float:right">
                        {{ project.blog.when_updated }}
                    </div>
                    <div style="clear:both"></div>
                {% else %}
                    This project has not been fetched yet. It will be fetched
                    in the next cycle.
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}