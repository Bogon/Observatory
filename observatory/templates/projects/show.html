{% extends "base.html" %}

{% block title %}Dashboard â€¢ {{ project.title }}{% endblock %}

{% block content %}
<h2 style='float:left'>{{ project.title }}</h2>

<ul class="project-info">
    {% if user in project.authors.all %}
        <li>
            <a href="{% url dashboard.views.projects.modify project.id %}">
                Modify
            </a>
        </li>
    {% endif %}
    {% if project.website %}
        <li><a href="{{ project.website }}">Website</a></li>
    {% endif %}
    {% if project.blog.url %}
        <li><a href="{{ project.blog.url }}">Blog</a></li>
    {% endif %}
    {% if project.repository.url %}
        <li><a href="{{ project.repository.url }}">
            Repository
        </a></li>
    {% endif %}
</ul>

<p id="project-description">
    {{ project.description }}
</p>

{% if project.authors.all %}
    <h3>Authors</h3>
    <ul>
        {% for author in project.authors.all %}
            <li>
                <a href="{% url dashboard.views.users.profile author.id %}">
                    {{ author.get_full_name }}
                </a>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <h3>No authors.</h3>
{% endif %}
{% if user.is_authenticated %}
{% if user not in project.authors.all %}
    <a href="{% url dashboard.views.projects.add_user project.id user.id %}">
        I work on this!
    </a>
{% else %}
    <a href="{% url dashboard.views.projects.remove_user project.id user.id %}">
        I'm not working on this anymore.
    </a>
{% endif %}
{% endif %}

{% if project.blog.blogpost_set.all %}
    <h3>Blog Posts</h3>
    <ul>
        {% for post in project.blog.blogpost_set.all %}
        <li>
            <a href="{% url dashboard.views.blogs.show_post post.id %}">
                {% autoescape off %}{{ post.title }}{% endautoescape %}
            </a>
        </li>
        {% endfor %}
    </ul>
{% endif %}
{%  endblock %}